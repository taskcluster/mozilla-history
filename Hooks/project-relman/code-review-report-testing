{
  "hookGroupId": "project-relman",
  "hookId": "code-review-report-testing",
  "metadata": {
    "description": "",
    "emailOnError": true,
    "name": "Publish issues found in TRY tasks",
    "owner": "babadie@mozilla.com"
  },
  "schedule": [],
  "task": {
    "created": {
      "$fromNow": "0 seconds"
    },
    "deadline": {
      "$fromNow": "2 hours"
    },
    "expires": {
      "$fromNow": "1 month"
    },
    "extra": {},
    "metadata": {
      "description": "",
      "name": "Static analysis automated tests",
      "owner": "babadie@mozilla.com",
      "source": "https://github.com/mozilla/release-services"
    },
    "payload": {
      "artifacts": {
        "public/results": {
          "path": "/tmp/results",
          "type": "directory"
        }
      },
      "capabilities": {},
      "command": [
        "/bin/static-analysis-bot",
        "--taskcluster-secret",
        "project/relman/codereview/testing"
      ],
      "env": {
        "$merge": [
          {
            "APP_CHANNEL": "testing",
            "MOZ_AUTOMATION": "1",
            "SSL_CERT_FILE": "/nix/store/110nnm7p0gaw7wzdf0q5dqf2ac8h6q2q-nss-cacert-3.42.1/etc/ssl/certs/ca-bundle.crt"
          },
          {
            "$if": "firedBy == 'triggerHook'",
            "else": {},
            "then": {
              "$eval": "payload"
            }
          },
          {
            "$if": "firedBy == 'pulseMessage'",
            "else": {},
            "then": {
              "TRY_RUN_ID": {
                "$eval": "payload.runId"
              },
              "TRY_TASK_GROUP_ID": {
                "$eval": "payload.status.taskGroupId"
              },
              "TRY_TASK_ID": {
                "$eval": "payload.status.taskId"
              }
            }
          }
        ]
      },
      "features": {
        "taskclusterProxy": true
      },
      "image": "mozillareleng/services:docker-image-python3.7-mozilla-staticanalysis-bot-1.0.0-rdhdn7kn3l7zairjzp4pp2cag9v0rvqj",
      "maxRunTime": 7200
    },
    "priority": "normal",
    "provisionerId": "aws-provisioner-v1",
    "retries": 5,
    "routes": [
      "index.project.releng.services.project.testing.static_analysis_bot.latest"
    ],
    "schedulerId": "-",
    "scopes": [
      "secrets:get:project/relman/codereview/testing",
      "notify:email:*",
      "index:insert-task:project.releng.services.project.testing.static_analysis_bot.*",
      "index:insert-task:project.releng.services.tasks.*"
    ],
    "tags": {},
    "workerType": "releng-svc"
  },
  "triggerSchema": {
    "type": "object",
    "properties": {},
    "additionalProperties": false
  }
}
